# This workflow will install Python dependencies, run tests and lint with a variety of Python versions
# For more information see: https://help.github.com/actions/language-and-framework-guides/using-python-with-github-actions

name: Code & doc quality

on:
  push:
    branches: [ master ]
  pull_request:

jobs:
  ruff:
    name: Check ruff quality rules
    runs-on: ubuntu-latest
    container:
      image: python:3.8
      env:
        LANG: C.UTF-8
    steps:
      - uses: actions/checkout@v5
      - name: Install ruff
        run: |
          pip install ruff

      - name: Check
        run: |
          ruff check vectortiles test_vectortiles

      - name: Format
        run: |
          ruff format --check vectortiles test_vectortiles

  doc:
    name: Check doc is building
    runs-on: ubuntu-latest
    container:
      image: python:3.8
      env:
        LANG: C.UTF-8

    steps:
      - uses: actions/checkout@v5
      - name: Check documentation
        run: |
          cd docs
          pip install -r ./requirements.txt -U 
          make html SPHINXOPTS="-W"

